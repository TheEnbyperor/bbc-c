.main
LDA #22
JSR &FFE3
LDA #2
JSR &FFE3
LDA #0
STA X
STA X+1
STA COL
.loopx LDA #0
STA Y
STA Y+1
SEC
LDA X+1
SBC #255
STA R+1
LDA X
SBC #4
STA R
LDA R
BPL end
CLC
LDA X+1
ADC #8
STA X+1
LDA X
ADC #0
STA X
.loopy SEC
LDA Y+1
SBC #255
STA R+1
LDA Y
SBC #3
STA R
LDA R
BPL loopx
CLC
LDA Y+1
ADC #4
STA Y+1
LDA Y
ADC #0
STA Y
CLC
LDA COL
ADC #1
STA COL
SEC
LDA COL
SBC #7
STA R
LDA R
BPL resetcol
.out LDA #18
JSR &FFE3
LDA #0
JSR &FFE3
LDA COL
JSR &FFE3
LDA #25
JSR &FFE3
LDA #69
JSR &FFE3
LDA X+1
JSR &FFE3
LDA X
JSR &FFE3
LDA Y+1
JSR &FFE3
LDA Y
JSR &FFE3
JMP loopy
.end RTS
.resetcol LDA #0
STA COL
JMP out